output {
   if [agent][type] == "winlogbeat" {
   elasticsearch {
     index => "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"
     hosts => ["https://es01:9200"]
     template => "/usr/share/logstash/templates/winlogbeat.template.json"
     template_name => "winlogbeat"
     template_overwrite => true
     user => "elastic"
     password => "changeme"
	 ssl.certificate_authorities: "/usr/share/certificates/ca/ca.crt"
     ssl.certificate: "/usr/share/certificates/logstash/logstash.crt"
     ssl.key: "/usr/share/certificates/logstash/logstash.key"
    }
  }
  else {
   elasticsearch {
     index => "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"
     hosts => ["https://es01:9200"]
     document_type => "%{[@metadata][type]}"
     manage_template => false
     user => "elastic"
     password => "changeme"
	 ssl.certificate_authorities: "/usr/share/certificates/ca/ca.crt"
     ssl.certificate: "/usr/share/certificates/logstash/logstash.crt"
     ssl.key: "/usr/share/certificates/logstash/logstash.key"
    }
  }
}
output {
 if "stoq" in [tags] {
   elasticsearch {
     hosts => ["https://es01:9200"]
     user => "elastic"
     password => "changeme"
	 ssl.certificate_authorities: "/usr/share/certificates/ca/ca.crt"
     ssl.certificate: "/usr/share/certificates/logstash/logstash.crt"
     ssl.key: "/usr/share/certificates/logstash/logstash.key"
     index => "stoq-%{+YYYY.MM.dd}"
     template => "/usr/share/logstash/templates/stoq.template.json"
     template_name => "stoq"
     template_overwrite => "true"
     }
  }
}
